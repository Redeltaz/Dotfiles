#!/bin/bash

set -e

dotfiles_config="~/.dotfiles/config"
arg_list=("sync" "link" "install")

if [ -d "$dotfiles_config" ]; then
    echo "The folder $dotfiles_config does not exist."
    exit 1
fi

cd ~/.dotfiles

if [ $# -gt 1 ]; then
    echo "There is too much arguments."
    exit 1
elif [ $# -lt 1 ]; then
    echo "There is not enough arguments."
    exit 1
fi

# Install packages needed for config
install () {
    echo "install"
}

# Synchronize config with remote on git
sync () {
    git pull
}

# Link local config to dotfiles folder
link () {
    echo "link"
}

if [[ ! " ${arg_list[*]} " == *" $1 "* ]]; then
    echo "The argument '$1' does not exist."
    exit 1
else
    if [ "$1" == "install" ]; then
        install
    elif [ "$1" == "sync" ]; then
        sync
    elif [ "$1" == "link" ]; then
        link
    else
        echo "Error with argument '$1'."
        exit 1
    fi
fi
